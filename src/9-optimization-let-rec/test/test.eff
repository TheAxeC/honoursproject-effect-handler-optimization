
effect Fail : unit -> empty

let choose_all = handler
  | val x -> [x]
  | #Fail _ _ -> []

(******************************************************************************)

let result = with choose_all handle
(  let rec place x qs =
    #Fail ()
  in
  place 1 [])
